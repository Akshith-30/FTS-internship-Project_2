<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <title>Top 3 Students Per Subject Per Year</title>
    <link rel="stylesheet" href="/css/topStudents.css" />
    <link href="https://fonts.googleapis.com/css2?family=Lexend:wght@400;600&display=swap" rel="stylesheet" />
</head>
<body>
<a href="dashboard.html" class="back-button-dark">
    <span class="icon">
        <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="none" viewBox="0 0 24 24" class="back-icon">
            <path d="M15 18l-6-6 6-6" stroke="#e0e0e0" stroke-width="2" fill="none" stroke-linecap="round" stroke-linejoin="round" />
        </svg>
    </span>
    <span class="text">Back to Dashboard</span>
</a>

<div class="container">
    <h2>Top 3 Students Per Subject Per Year</h2>

    <div class="filters">
        <label class="filter-label" for="subject-filter">Subject:</label>
        <select id="subject-filter">
            <option value="">All Subjects</option>
            <option value="Mathematics">Mathematics</option>
            <option value="Science">Science</option>
            <option value="English">English</option>
            <option value="Computer Science">Computer Science</option>
        </select>

        <label class="filter-label" for="year-filter">Year:</label>
        <select id="year-filter">
            <option value="">All Years</option>
            <option value="1">Year 1</option>
            <option value="2">Year 2</option>
            <option value="3">Year 3</option>
            <option value="4">Year 4</option>
        </select>
    </div>

    <table id="top-students-table">
        <thead>
        <tr>
            <th>Student</th>
            <th>Subject</th>
            <th>Roll Number</th>
            <th>Marks</th>
            <th>Year</th>
        </tr>
        </thead>
        <tbody id="students-body">
        </tbody>
    </table>

    <div style="color:#b0b3b8; margin-top:18px; font-size:0.97em;" id="showing-count">Showing 0 records</div>
</div>

<script>
    const students = [
            // Computer Science
    { name: "Sumana", subject: "Computer Science", roll: 15, marks: 94, year: 3 },
    { name: "Tanvi", subject: "Computer Science", roll: 16, marks: 91, year: 3 },
    { name: "Mihir", subject: "Computer Science", roll: 17, marks: 89, year: 3 },

    { name: "Rohit", subject: "Computer Science", roll: 30, marks: 92, year: 4 },
    { name: "Sneha", subject: "Computer Science", roll: 33, marks: 90, year: 4 },
    { name: "Ravi", subject: "Computer Science", roll: 31, marks: 87, year: 4 },

    // Math
    { name: "Kushali", subject: "Mathematics", roll: 25, marks: 92, year: 2 },
    { name: "Aditya", subject: "Mathematics", roll: 26, marks: 90, year: 2 },
    { name: "Reema", subject: "Mathematics", roll: 27, marks: 88, year: 2 },

    { name: "Akshith", subject: "Mathematics", roll: 40, marks: 91, year: 1 },
    { name: "Priya", subject: "Mathematics", roll: 41, marks: 89, year: 1 },
    { name: "Kiran", subject: "Mathematics", roll: 42, marks: 87, year: 1 },

    // Science
    { name: "Akshita", subject: "Science", roll: 5, marks: 96, year: 4 },
    { name: "Dev", subject: "Science", roll: 6, marks: 92, year: 4 },
    { name: "Isha", subject: "Science", roll: 7, marks: 90, year: 4 },

    { name: "Srivatsan", subject: "Science", roll: 8, marks: 93, year: 2 },
    { name: "Rahul", subject: "Science", roll: 9, marks: 89, year: 2 },
    { name: "Tina", subject: "Science", roll: 10, marks: 87, year: 2 },

    // English
    { name: "Sri Venkat", subject: "English", roll: 50, marks: 95, year: 1 },
    { name: "Varshitha", subject: "English", roll: 51, marks: 90, year: 1 },
    { name: "Meena", subject: "English", roll: 52, marks: 88, year: 1 },
    ];

    const subjectFilter = document.getElementById("subject-filter");
    const yearFilter = document.getElementById("year-filter");
    const tableBody = document.getElementById("students-body");
    const showingCount = document.getElementById("showing-count");

    function renderTable() {
        const selectedSubject = subjectFilter.value;
        const selectedYear = yearFilter.value;

        let filtered = students;

        if (selectedSubject) {
            filtered = filtered.filter(s => s.subject === selectedSubject);
        }
        if (selectedYear) {
            filtered = filtered.filter(s => s.year == selectedYear);
        }

        tableBody.innerHTML = "";

        filtered.forEach(student => {
            const row = `<tr>
                <td>${student.name}</td>
                <td>${student.subject}</td>
                <td>${student.roll}</td>
                <td>${student.marks}</td>
                <td>${student.year}</td>
            </tr>`;
            tableBody.innerHTML += row;
        });

        showingCount.textContent = `Showing ${filtered.length} record${filtered.length !== 1 ? 's' : ''}`;
    }

    subjectFilter.addEventListener("change", renderTable);
    yearFilter.addEventListener("change", renderTable);

    // Initial render
    renderTable();
</script>
</body>
</html>
